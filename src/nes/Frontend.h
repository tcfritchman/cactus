#ifndef NES_EMULATOR_SRC_UI_H_
#define NES_EMULATOR_SRC_UI_H_

#include "NES.h"
#include "../imgui/imgui.h"
#include "Emulator.h"
#include <SDL.h>

class Frontend
{

 public:
	static Frontend Init(SDL_Window* window, SDL_Renderer* renderer, std::shared_ptr<Emulator> emulator);

	void Redraw();
	static void HandleEvent(SDL_Event* event);

	Frontend() = delete;

 private:
	SDL_Window* mWindow;
	SDL_Renderer* mRenderer;
	ImGuiIO& io;
	std::shared_ptr<Emulator> mEmulator;
	bool shouldShowCpuWindow = true;
	bool shouldShowMemoryWindow = true;
	bool shouldShowPPUDebugWindow = true;

	const ImVec4 CLEAR_COLOR = ImVec4(0.09f, 0.11f, 0.14f, 1.0f);

	const std::vector<std::vector<uint8_t>> COLOR_PALETTE = {
		{0x52,0x52,0x01},{0x52,0x51,0x1a},{0x0f,0x0f,0x23},{0x65,0x63,0x06},
		{0x03,0x36,0x40},{0x4b,0x26,0x04},{0x09,0x3f,0x32},{0x04,0x00,0x13},
		{0x20,0x1f,0x0b},{0x00,0x00,0x2a},{0x2f,0x00,0x00},{0x00,0x0a,0x2e},
		{0x26,0x00,0x00},{0x2d,0x00,0x00},{0x00,0x00,0x00},{0x00,0x00,0x00},
		{0xa0,0xa0,0x1e},{0xa0,0x9d,0x4a},{0x37,0x38,0x58},{0xbc,0xb8,0x28},
		{0x21,0x75,0x84},{0x94,0x5c,0x23},{0x2e,0x82,0x6f},{0x24,0x00,0x3f},
		{0x52,0x51,0x31},{0x00,0x00,0x63},{0x6b,0x1a,0x0e},{0x05,0x2e,0x69},
		{0x5c,0x10,0x00},{0x68,0x00,0x00},{0x00,0x00,0x00},{0x00,0x00,0x00},
		{0xff,0xfe,0x69},{0xff,0xfc,0x9e},{0x87,0x89,0xae},{0xff,0xff,0x76},
		{0x6d,0xce,0xe0},{0xf1,0xb2,0x70},{0x7c,0xde,0xc8},{0x70,0x3e,0x91},
		{0xa7,0xa6,0x81},{0x25,0x28,0xba},{0xc4,0x63,0x54},{0x46,0x7d,0xc1},
		{0xb3,0x56,0x3c},{0xc0,0x3c,0x3c},{0x00,0x00,0x00},{0x00,0x00,0x00},
		{0xff,0xfe,0xbe},{0xff,0xfd,0xd6},{0xcc,0xcc,0xdd},{0xff,0xff,0xc4},
		{0xc0,0xea,0xf2},{0xf9,0xdf,0xc1},{0xc7,0xf1,0xe8},{0xc2,0xaa,0xd0},
		{0xda,0xd9,0xc9},{0x9d,0x9e,0xe2},{0xe6,0xbc,0xb4},{0xae,0xc7,0xe5},
		{0xdf,0xb5,0xa9},{0xe4,0xa9,0xa9},{0x00,0x00,0x00},{0x00,0x00,0x00}
	};

	Frontend(SDL_Window* mWindow, SDL_Renderer* mRenderer, ImGuiIO& io, std::shared_ptr<Emulator> emulator);

	void DrawCPUDebug();
	void DrawMemoryDebug();
	void DrawPPUDebug();
	void DrawMainMenuBar();
	void DrawPPURender();
};

#endif //NES_EMULATOR_SRC_UI_H_
